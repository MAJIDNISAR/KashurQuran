"use strict";!function(a){var b={Constants:{STICKY_DIRECTION:"down",STICKY_WRAPPER:!1},CssClasses:{MAIL_TOOLBAR:"mail-toolbar",MAIL_LIST:"mail-list",MAIL_LIST_ITEM:"mail-list-item",MAIL_LIST_LINK:"mail-list-link",MAIL_CONTENT:"mail-content",STICKY_STUCK:"sticky",ACTIVE:"active",HOVER:"hover",SELECTED:"selected"},init:function(){this.$window=a(window),this.$toolbars=a("."+this.CssClasses.MAIL_TOOLBAR),this.$mainToolbar=this.$toolbars.first(),this.$list=a("."+this.CssClasses.MAIL_LIST),this.$items=a("."+this.CssClasses.MAIL_LIST_ITEM),this.$checkboxes=this.$items.find(":checkbox"),this.$links=a("."+this.CssClasses.MAIL_LIST_LINK),this.$content=a("."+this.CssClasses.MAIL_CONTENT),this.$backBtns=this.$content.find('[data-toggle="tab"]'),this.stickyToolbar=null,this.createStickyToolbar().bindEvents()},bindEvents:function(){this.$items.on("mouseenter.e.mail",this.handleItemMouseEnter.bind(this)),this.$items.on("mouseleave.e.mail",this.handleItemMouseLeave.bind(this)),this.$links.on("click.e.mail",this.handleLinkClick.bind(this)),this.$links.add(this.$backBtns).on("shown.bs.tab",this.handleTabShown.bind(this)),this.$checkboxes.on("change.e.mail",this.handleCheckboxChange.bind(this))},handleItemMouseEnter:function(b){a(b.currentTarget).addClass(this.CssClasses.HOVER)},handleItemMouseLeave:function(b){a(b.currentTarget).removeClass(this.CssClasses.HOVER)},handleCheckboxChange:function(b){var c=a(b.currentTarget);this.selectItem(c),this.toggleToolbar()},handleLinkClick:function(b){var c=a(b.currentTarget),d=c.closest("."+this.CssClasses.MAIL_LIST_ITEM);d.hasClass(this.CssClasses.ACTIVE)&&d.removeClass(this.CssClasses.ACTIVE),this.rememberScrollbarPos()},handleTabShown:function(b){var c=a(b.currentTarget),d=this.getActiveLink();c.is(d)?(this.destroyStickyToolbar(),this.scrollTo(0)):(this.createStickyToolbar(),this.scrollTo(this.rememberedScrollbarPos()))},selectItem:function(a){var b=a.closest("."+this.CssClasses.MAIL_LIST_ITEM),c=a.is(":checked");b.toggleClass(this.CssClasses.SELECTED,c)},rememberScrollbarPos:function(){this.ypos=this.$window.scrollTop()},rememberedScrollbarPos:function(){return this.ypos},getActiveItem:function(){return this.$items.filter("."+this.CssClasses.ACTIVE)},getActiveLink:function(){var a=this.getActiveItem();return a.find('[data-toggle="tab"]')},getSelectedItems:function(){return this.$items.filter("."+this.CssClasses.SELECTED)},hasSelectedItems:function(){return!!this.getSelectedItems().length},scrollTo:function(a){this.$window.scrollTop(a)},toggleToolbar:function(){var a=this.hasSelectedItems();this.$mainToolbar.collapse(a?"show":"hide")},createStickyToolbar:function(){var b=a.extend({},this.getStickyOptions(),{element:this.$mainToolbar[0]});return this.stickyToolbar=new Waypoint.Sticky(b),this},destroyStickyToolbar:function(){this.stickyToolbar.destroy()},getCreateOptions:function(b,c){var d=new RegExp("^"+b+"(_)?","i"),e={};return a.each(this,function(b,f){a.isPlainObject(f)&&a.each(f,function(f,g){d.test(f)&&(f=f.replace(d,"").replace(/_/g,"-"),f=a.camelCase(f.toLowerCase()),c&&c(e,b,f,g)||(e[f]=g))})}),e},getStickyOptions:function(){return this.getCreateOptions("sticky",function(a,b,c,d){return c="CssClasses"===b?c+"Class":c,a[c]=d})}};b.init()}(jQuery);